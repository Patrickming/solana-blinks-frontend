# API测试脚本集

本目录包含用于测试后端API功能的各种测试脚本。这些脚本使用Bash编写，通过curl命令直接调用API，并验证响应是否符合预期。

## 测试脚本列表

### 1. 用户头像API测试 (`test_api_mysql_avatar.sh`)

测试用户头像上传、获取和删除功能的API接口。

**主要测试内容：**
- 用户注册和登录
- 上传头像
- 获取用户个人资料中的头像
- 删除头像
- 测试不同格式和大小的头像上传

**使用方法：**
```bash
bash test/test_api_mysql_avatar.sh
```

### 2. 论坛功能API测试 (`test_api_mysql_forum.sh`)

测试所有论坛相关的接口，包括话题、评论、分类、标签等功能。

**主要测试内容：**
- 用户认证
- 话题功能（创建、获取、更新、删除）
- 分类和标签功能
- 评论功能
- 用户社区功能
- 搜索和统计功能

**使用方法：**
```bash
bash test/test_api_mysql_forum.sh
```

### 3. 社区功能API测试 (`test_api_mysql_community.sh`)

更专注地测试社区相关的接口，包括分类、话题、评论、点赞等功能。

**主要测试内容：**
- 用户注册和登录
- 分类功能
- 话题功能（创建、获取、更新、点赞）
- 评论功能（创建、获取、点赞、回复、删除）
- 标签功能
- 用户社区功能
- 搜索和统计功能

**使用方法：**
```bash
bash test/test_api_mysql_community.sh
```

## 注意事项

1. 所有测试脚本默认使用`https://dkynujeaxjjr.sealoshzh.site`作为API基础URL。如需更改，请修改脚本中的`BASE_URL`变量。

2. 测试脚本设置了10秒的超时时间，如果API响应较慢，可能会导致测试失败。可以通过修改脚本中的`CURL_TIMEOUT`变量来调整超时时间。

3. 测试脚本会创建临时测试用户和数据，并在测试结束后尝试清理。但在某些情况下（如测试中断），可能需要手动清理测试数据。

4. 如果测试失败，请查看测试输出中的错误消息，以及后端服务的日志，以帮助诊断问题。

## 常见问题排查

1. 如果测试无法连接到API服务器，请检查：
   - API服务器是否正常运行
   - 网络连接是否正常
   - `BASE_URL`是否设置正确

2. 如果API返回错误状态码，请检查：
   - API实现是否正确
   - 请求格式和内容是否符合API要求
   - 后端服务日志中是否有相关错误信息

3. 如果测试中途超时，请考虑：
   - 增加`CURL_TIMEOUT`值
   - 检查服务器负载情况
   - 检查数据库连接是否正常